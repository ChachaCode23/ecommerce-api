<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<body>

<!-- Fragmento de mensajes de alerta reutilizable -->
<div th:fragment="messages">
    <!-- Mensaje de éxito -->
    <div th:if="${param.success}" class="alert alert-success" style="display: flex; align-items: center;">
        <svg style="width: 20px; height: 20px; margin-right: 10px; flex-shrink: 0;" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"/>
        </svg>
        <span th:text="${param.success}">Operación exitosa</span>
    </div>

    <!-- Mensaje de error desde parámetro URL -->
    <div th:if="${param.error}" class="alert alert-error" style="display: flex; align-items: center;">
        <svg style="width: 20px; height: 20px; margin-right: 10px; flex-shrink: 0;" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"/>
        </svg>
        <span th:text="${param.error}">Ha ocurrido un error</span>
    </div>

    <!-- Mensaje de error desde modelo -->
    <div th:if="${errorMessage}" class="alert alert-error" style="display: flex; align-items: center;">
        <svg style="width: 20px; height: 20px; margin-right: 10px; flex-shrink: 0;" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"/>
        </svg>
        <span th:text="${errorMessage}">Ha ocurrido un error</span>
    </div>

    <!-- Mensaje de éxito desde modelo -->
    <div th:if="${successMessage}" class="alert alert-success" style="display: flex; align-items: center;">
        <svg style="width: 20px; height: 20px; margin-right: 10px; flex-shrink: 0;" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"/>
        </svg>
        <span th:text="${successMessage}">Operación exitosa</span>
    </div>

    <!-- Mensaje informativo -->
    <div th:if="${infoMessage}" class="alert alert-info" style="display: flex; align-items: center;">
        <svg style="width: 20px; height: 20px; margin-right: 10px; flex-shrink: 0;" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"/>
        </svg>
        <span th:text="${infoMessage}">Información</span>
    </div>

    <!-- Mensaje de advertencia -->
    <div th:if="${warningMessage}" class="alert" style="display: flex; align-items: center; background-color: #fef3c7; color: #92400e; border-left: 4px solid #f59e0b;">
        <svg style="width: 20px; height: 20px; margin-right: 10px; flex-shrink: 0;" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"/>
        </svg>
        <span th:text="${warningMessage}">Advertencia</span>
    </div>
</div>

<!-- Script para auto-ocultar mensajes después de 5 segundos -->
<script th:fragment="auto-hide-messages">
    document.addEventListener('DOMContentLoaded', function() {
        const alerts = document.querySelectorAll('.alert');
        
        alerts.forEach(function(alert) {
            // Auto-ocultar después de 5 segundos
            setTimeout(function() {
                alert.style.transition = 'opacity 0.5s ease';
                alert.style.opacity = '0';
                
                setTimeout(function() {
                    alert.style.display = 'none';
                }, 500);
            }, 5000);

            // Agregar botón de cerrar
            const closeBtn = document.createElement('button');
            closeBtn.innerHTML = '×';
            closeBtn.style.cssText = 'background: none; border: none; font-size: 24px; cursor: pointer; margin-left: auto; padding: 0 5px; opacity: 0.6;';
            closeBtn.onclick = function() {
                alert.style.transition = 'opacity 0.3s ease';
                alert.style.opacity = '0';
                setTimeout(function() {
                    alert.style.display = 'none';
                }, 300);
            };
            
            alert.appendChild(closeBtn);
            alert.style.display = 'flex';
        });
    });
</script>

</body>
</html>